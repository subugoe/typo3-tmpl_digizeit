<!-- ###NOSEARCHINDEX### BEGIN-->
<span class="goobit3__warning">###WARNMESSAGE###</span>
<!-- ###NOSEARCHINDEX### END-->

<!-- ###MODS### BEGIN-->
<a href="http://www.digizeitschriften.de/informationen/subskription/" class="goobit3__lock goobit3__lock--###LOCKSTATUS###" title="###LOCKTEXT###">
	<span class="sr-only">###LOCKTEXT###</span>
</a>

<div class="goobit3-toc">

	<!-- ###MODSSEC### BEGIN-->
	<?xml version="1.0" encoding="utf-8"?>
	<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform" xmlns:mods="http://www.loc.gov/mods/v3">

		<xsl:output method="html"/>

		<xsl:param name="yearpublish" value="0" />
		<xsl:param name="Successor" value="0" />
		<xsl:param name="Predecessor" value="0" />
		<xsl:param name="basepurl" value="0" />
		<xsl:param name="volumelist" value="0" />
		<xsl:param name="pdflink" value="0" />
		<xsl:param name="pdficon" value="0" />
		<xsl:param name="publlink" value="" />

		<!-- schnelle schmutzige Lösung für DigiZeit besser umbauen zu modsCollection siehe tx_goobi_img.php -->
		<xsl:template match="mods:note[@ID='MGH']" mode="periodicalvolume">
			<xsl:choose>
				<xsl:when test="$docstrct='Zeitschrift' or $docstrct='Periodical'">
					<div class="goobit3__comment"><xsl:value-of disable-output-escaping="yes" select="normalize-space(string(.))"  /></div>
				</xsl:when>
			</xsl:choose>
		</xsl:template>
		<xsl:template match="mods:note[@ID='destatis.de']" mode="periodicalvolume">
			<xsl:choose>
				<xsl:when test="$docstrct='Zeitschrift' or $docstrct='Periodical'">
					<div class="goobit3__comment"><xsl:value-of disable-output-escaping="yes" select="normalize-space(string(.))"  /></div>
				</xsl:when>
			</xsl:choose>
		</xsl:template>
		<xsl:template match="mods:note[@ID='diglit.ub.uni-heidelberg.de']" mode="periodicalvolume">
			<xsl:choose>
				<xsl:when test="$docstrct='Zeitschrift' or $docstrct='Periodical' or $docstrct='multivolume_work'">
					<div class="goobit3__comment"><xsl:value-of disable-output-escaping="yes" select="normalize-space(string(.))"  /></div>
				</xsl:when>
			</xsl:choose>
		</xsl:template>
		<xsl:template match="mods:note[@ID='digi.ub.uni-heidelberg.de']" mode="periodicalvolume">
			<xsl:choose>
				<xsl:when test="$docstrct='Zeitschrift' or $docstrct='Periodical' or $docstrct='multivolume_work'">
					<div class="goobit3__comment"><xsl:value-of disable-output-escaping="yes" select="normalize-space(string(.))"  /></div>
				</xsl:when>
			</xsl:choose>
		</xsl:template>
		<xsl:template match="mods:note[@ID='idb.ub.uni-tuebingen.de']" mode="periodicalvolume">
			<xsl:choose>
				<xsl:when test="$docstrct='Zeitschrift' or $docstrct='Periodical' or $docstrct='multivolume_work'">
					<div class="goobit3__comment"><xsl:value-of disable-output-escaping="yes" select="normalize-space(string(.))"  /></div>
				</xsl:when>
			</xsl:choose>
		</xsl:template>
		<xsl:template match="mods:note[@ID='www.zbw.eu.digire']" mode="periodicalvolume">
			<xsl:choose>
				<xsl:when test="$docstrct='Zeitschrift' or $docstrct='Periodical' or $docstrct='multivolume_work'">
					<div class="goobit3__comment"><xsl:value-of disable-output-escaping="yes" select="normalize-space(string(.))"  /></div>
				</xsl:when>
			</xsl:choose>
		</xsl:template>
		<xsl:template match="mods:note[@ID='www.uni-weimar.de.ubweimar']" mode="periodicalvolume">
			<xsl:choose>
				<xsl:when test="$docstrct='Zeitschrift' or $docstrct='Periodical' or $docstrct='multivolume_work'">
					<div class="goobit3__comment"><xsl:value-of disable-output-escaping="yes" select="normalize-space(string(.))"  /></div>
				</xsl:when>
			</xsl:choose>
		</xsl:template>
		<xsl:template match="mods:note[@ID='europeana.ub.uni-frankfurt.de']" mode="periodicalvolume">
			<xsl:choose>
				<xsl:when test="$docstrct='Zeitschrift' or $docstrct='Periodical' or $docstrct='multivolume_work'">
					<div class="goobit3__comment"><xsl:value-of disable-output-escaping="yes" select="normalize-space(string(.))"  /></div>
				</xsl:when>
			</xsl:choose>
		</xsl:template>
		<xsl:template match="mods:note[@ID='goobiweb.bbf.dipf.de']" mode="periodicalvolume">
			<xsl:choose>
				<xsl:when test="$docstrct='Zeitschrift' or $docstrct='Periodical' or $docstrct='multivolume_work'">
					<div class="goobit3__comment"><xsl:value-of disable-output-escaping="yes" select="normalize-space(string(.))"  /></div>
				</xsl:when>
			</xsl:choose>
		</xsl:template>
                <xsl:template match="mods:note[@ID='www.wuerttembergische-kirchengeschichte.de']" mode="periodicalvolume">
                    <xsl:choose>
                        <xsl:when test="$docstrct='Zeitschrift' or $docstrct='Periodical' or $docstrct='multivolume_work'">
                            <div class="goobit3__comment"><xsl:value-of disable-output-escaping="yes" select="normalize-space(string(.))"  /></div>
                        </xsl:when>
                    </xsl:choose>
                </xsl:template>
		<xsl:template match="mods:note[@ID='preImport']" mode="periodicalvolume">
			<xsl:choose>
				<xsl:when test="$docstrct='Zeitschriftenband' or $docstrct='Periodical Volume'">
					<div class="goobit3__comment"><xsl:value-of disable-output-escaping="yes" select="normalize-space(string(.))"  /></div>
				</xsl:when>
			</xsl:choose>
		</xsl:template>

		<xsl:template match="mods:relatedItem[@type='succeeding']" mode="succeeding">
			<xsl:if test="$Successor" >
				<xsl:for-each select=".">
					<div class="succeeding"><!-- TODO -->
						<xsl:value-of select="$Successor" /><xsl:text>: </xsl:text>
						<xsl:choose>
							<xsl:when test="mods:titleInfo[1]/mods:title and string-length(normalize-space(string(mods:titleInfo/mods:title))) &lt;= 80">
								<a>
									<xsl:attribute name="href"><xsl:value-of select="$basepurl" /><xsl:value-of select="mods:recordInfo/mods:recordIdentifier" /></xsl:attribute>
									<xsl:value-of select="normalize-space(string(mods:titleInfo/mods:title))"  />
								</a>
							</xsl:when>
							<xsl:otherwise>
								<a>
									<xsl:attribute name="href"><xsl:value-of select="$basepurl" /><xsl:value-of select="mods:recordInfo/mods:recordIdentifier" /></xsl:attribute>
									<xsl:attribute name="title"><xsl:value-of select="mods:titleInfo/mods:title" /></xsl:attribute>
									<xsl:value-of select="concat(substring(normalize-space(string(mods:titleInfo/mods:title)),0,80),'...')"  />
								</a>
							</xsl:otherwise>
						</xsl:choose>
					</div>
				</xsl:for-each>
			</xsl:if>
		</xsl:template>

		<xsl:template match="mods:relatedItem[@type='preceding']"  mode="preceding">
			<xsl:if test="$Predecessor" >
			<xsl:for-each select=".">
				<div class="preceeding">
					<xsl:value-of select="$Predecessor" /><xsl:text>: </xsl:text>
					<xsl:choose>
						<xsl:when test="mods:titleInfo[1]/mods:title and string-length(normalize-space(string(mods:titleInfo/mods:title))) &lt;= 80">
							<a>
								<xsl:attribute name="href"><xsl:value-of select="$basepurl" /><xsl:value-of select="mods:recordInfo/mods:recordIdentifier" /></xsl:attribute>
								<xsl:value-of select="normalize-space(string(mods:titleInfo/mods:title))"  />
							</a>
						</xsl:when>
						<xsl:otherwise>
							<a>
								<xsl:attribute name="href"><xsl:value-of select="$basepurl" /><xsl:value-of select="mods:recordInfo/mods:recordIdentifier" /></xsl:attribute>
								<xsl:attribute name="title"><xsl:value-of select="mods:titleInfo/mods:title" /></xsl:attribute>
								<xsl:value-of select="concat(substring(normalize-space(string(mods:titleInfo/mods:title)),0,80),'...')"  />
							</a>
						</xsl:otherwise>
					</xsl:choose>
				</div>
			</xsl:for-each>
			</xsl:if>
		</xsl:template>

<!-- ############################################################################### -->

		<xsl:template match="/mods:mods">

			<xsl:apply-templates select="mods:note[@ID='MGH']" mode="periodicalvolume" />
			<xsl:apply-templates select="mods:note[@ID='destatis.de']" mode="periodicalvolume" />
			<xsl:apply-templates select="mods:note[@ID='diglit.ub.uni-heidelberg.de']" mode="periodicalvolume" />
			<xsl:apply-templates select="mods:note[@ID='digi.ub.uni-heidelberg.de']" mode="periodicalvolume" />
			<xsl:apply-templates select="mods:note[@ID='idb.ub.uni-tuebingen.de']" mode="periodicalvolume" />
			<xsl:apply-templates select="mods:note[@ID='www.zbw.eu.digire']" mode="periodicalvolume" />
			<xsl:apply-templates select="mods:note[@ID='www.uni-weimar.de.ubweimar']" mode="periodicalvolume" />
			<xsl:apply-templates select="mods:note[@ID='europeana.ub.uni-frankfurt.de']" mode="periodicalvolume" />
			<xsl:apply-templates select="mods:note[@ID='www.wuerttembergische-kirchengeschichte.de']" mode="periodicalvolume" />
			<xsl:apply-templates select="mods:note[@ID='goobiweb.bbf.dipf.de']" mode="periodicalvolume" />
			<xsl:apply-templates select="mods:note[@ID='preImport']" mode="periodicalvolume" />

				<!-- Main title line -->
				<xsl:choose>

					<xsl:when test="$indention='0'">

						<!-- Title -->
						<div class="goobit3-toc__title">

							<xsl:choose>
								<xsl:when test="mods:titleInfo[1]/mods:title and string-length(normalize-space(string(mods:titleInfo[1]/mods:title))) &lt;= 80">
									<a href="{$link}"><xsl:value-of select="mods:titleInfo[1]/mods:title" /></a>
								</xsl:when>
								<xsl:when test="mods:titleInfo[1]/mods:title and string-length(normalize-space(string(mods:titleInfo[1]/mods:title))) &gt;= 80">
									<a href="{$link}">
										<xsl:attribute name="title"><xsl:value-of select="mods:titleInfo[1]/mods:title" /></xsl:attribute>
										<xsl:value-of select="concat(substring(normalize-space(string(mods:titleInfo[1]/mods:title)),0,80),'...')" />
									</a>
								</xsl:when>
								<xsl:when test="not(mods:titleInfo[1]/mods:title) and string-length($docstrct) &gt;= 80">
									<a href="{$link}">
										<xsl:attribute name="title"><xsl:value-of select="$docstrct" /></xsl:attribute>
										<xsl:value-of select="concat(substring($docstrct,0,80),'...')" />
									</a>
								</xsl:when>
								<xsl:otherwise>
									<a href="{$link}"><xsl:value-of select="$docstrct" /></a>
								</xsl:otherwise>
							</xsl:choose>

							<!-- Persons -->
							<xsl:for-each select="mods:name[not(@*)]" >
								<xsl:choose>
									<xsl:when test="mods:displayForm">
										<xsl:value-of select="mods:displayForm" />
									</xsl:when>
									<xsl:otherwise>
											<xsl:value-of select="mods:namePart[@type='given']" /><xsl:text> </xsl:text><xsl:value-of select="mods:namePart[@type='family']" />
									</xsl:otherwise>
								</xsl:choose>
								<xsl:if test="position()!=last()">
									<xsl:text>; </xsl:text>
								</xsl:if>
							</xsl:for-each>
							<xsl:for-each select="mods:name[@*]" >
								<xsl:choose>
								<xsl:when test="mods:displayForm">
									<xsl:value-of select="mods:displayForm" />
								</xsl:when>
								<xsl:otherwise>
									<xsl:value-of select="mods:namePart[@type='given']" /><xsl:text> </xsl:text><xsl:value-of select="mods:namePart[@type='family']" />
								</xsl:otherwise>
								</xsl:choose>
								<xsl:if test="position()!=last()">
									<xsl:text>; </xsl:text>
								</xsl:if>
							</xsl:for-each>

						</div>

						<xsl:apply-templates select="mods:relatedItem[@type='succeeding']" mode="succeeding" />

						<xsl:if test="$publlink" >
							<div class="succeeding">
								<xsl:value-of select="$publlink"  disable-output-escaping="yes" />
							</div>
						</xsl:if>

					</xsl:when>

					<!-- other lines -->
					<xsl:otherwise>

						<div class="goobit3-toc-item goobit3-toc-item--indent-{$indention} goobit3-toc-item--{$current}">
							<!-- year of publication -->
							<xsl:choose>
								<xsl:when test="$yearpublish">
									<a href="{$link}"><span class="goobit3-toc-item__site-year"><xsl:value-of select="$yearpublish" /></span></a>
								</xsl:when>
							</xsl:choose>

							<!-- title -->
							<xsl:choose>
								<xsl:when test="mods:titleInfo[1]/mods:title and string-length(normalize-space(string(mods:titleInfo[1]/mods:title))) &lt;= 80">
									<a href="{$link}" class="goobit3-toc-item__site-title"><xsl:value-of select="mods:titleInfo[1]/mods:title" /></a>
									<xsl:if test="mods:titleInfo[1]/mods:partName">
										<a href="{$link}" class="goobit3-toc-item__site-title">
											<xsl:text>  </xsl:text><xsl:value-of select="$docstrct" /><xsl:text>  </xsl:text>
											<xsl:value-of select="mods:titleInfo[1]/mods:partName" />
										</a>
									</xsl:if>
								</xsl:when>
								<xsl:when test="mods:titleInfo[1]/mods:title and string-length(normalize-space(string(mods:titleInfo[1]/mods:title))) &gt;= 80">
									<a href="{$link}" class="goobit3-toc-item__site-title">
										<xsl:attribute name="title"><xsl:value-of select="mods:titleInfo[1]/mods:title" /></xsl:attribute>
										<xsl:value-of select="concat(substring(normalize-space(string(mods:titleInfo[1]/mods:title)),0,80),'...')" />
									</a>
									<xsl:if test="mods:titleInfo[1]/mods:partName">
										<a href="{$link}" class="goobit3-toc-item__site-title">
											<xsl:text>  </xsl:text><xsl:value-of select="$docstrct" /><xsl:text>  </xsl:text>
											<xsl:value-of select="mods:titleInfo[1]/mods:partName" />
										</a>
									</xsl:if>
								</xsl:when>
								<xsl:when test="not(mods:titleInfo[1]/mods:title) and string-length($docstrct) &gt;= 80">
									<a href="{$link}" class="goobit3-toc-item__site-title">
										<xsl:attribute name="title"><xsl:value-of select="$docstrct" /></xsl:attribute>
										<xsl:value-of select="concat(substring($docstrct,0,80),'...')" />
									</a>
								</xsl:when>
								<xsl:otherwise>
									<a href="{$link}" class="goobit3-toc-item__site-title"><xsl:value-of select="$docstrct" /></a>
								</xsl:otherwise>
							</xsl:choose>

							<!-- Persons -->
							<xsl:if test="$docstrct!='Zeitschriftenband'">
								<xsl:for-each select="mods:name[not(@*)]" >
									<xsl:choose>
										<xsl:when test="mods:displayForm">
											<xsl:value-of select="mods:displayForm" />
										</xsl:when>
										<xsl:otherwise>
											<xsl:value-of select="mods:namePart[@type='given']" /><xsl:text> </xsl:text><xsl:value-of select="mods:namePart[@type='family']" />
										</xsl:otherwise>
									</xsl:choose>
									<xsl:if test="position()!=last()">
										<xsl:text>; </xsl:text>
									</xsl:if>
								</xsl:for-each>
								<xsl:for-each select="mods:name[@*]" >
									<xsl:choose>
										<xsl:when test="mods:displayForm">
											<xsl:value-of select="mods:displayForm" />
										</xsl:when>
										<xsl:otherwise>
											<xsl:value-of select="mods:namePart[@type='given']" /><xsl:text> </xsl:text><xsl:value-of select="mods:namePart[@type='family']" />
										</xsl:otherwise>
									</xsl:choose>
									<xsl:if test="position()!=last()">
										<xsl:text>; </xsl:text>
									</xsl:if>
								</xsl:for-each>
							</xsl:if>
							<!-- pagenumber -->
							<span class="goobit3-toc-item__page-number">
								<a href="{$link}"><xsl:value-of select="$page" /></a>
								<xsl:if test="$pdflink">
									<a href="{$pdflink}" class="goobit3-toc-item__link goobit3-toc-item__link--pdf"><span class="sr-only">PDF</span></a>
								</xsl:if>
							</span>
						</div>

						<xsl:apply-templates select="mods:relatedItem[@type='preceding']" mode="preceding" />

					</xsl:otherwise>

				</xsl:choose>

		</xsl:template>

	</xsl:stylesheet><!-- ###MODSSEC### END -->

</div><!-- ###MODS### END-->
